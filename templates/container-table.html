<div id="container-table-{{project_info.id}}" class="panel panel-default">
</div>
<script>
$('#container-table-{{project_info.id}}').on("click",".delete-container",function() {
        var $row = $(this).closest("tr");    
        var $text = $row.find(".fp").text();
        var $href= "/containers/delete";
        var xmlHttpRequest;
        xmlHttpRequest = createXmlHttpRequest();
        xmlHttpRequest.onreadystatechange = getResult;
        var $url = $href + "?id=" + $text + "&v=1";

        xmlHttpRequest.open("GET",$url,true);
        xmlHttpRequest.send(null);

        var html=' \
                <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px"> \
                    <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"> \
                  <span class="show">正在删除</span> \
                   </div> \
               </div> \
             ';
        $row.find(".status").children().remove();
        $row.find(".status").append($(html));
        function getResult(){
            if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
                var $content = xmlHttpRequest.responseText;
                if ($content == 'succeed'){
                    var url='/containers/update?project_id=' + '{{ project_info.id }}' + "&user_id=" + '{{user_id}}';
                    $.ajax({
                        type: "GET",
                        url: url }).done(function( data ) {
                                $("#container-table-{{project_info.id}}").html(data);
                    });
                }
            }
        }
    });
$('#container-table-{{project_info.id}}').on("click",".start-container",function() {
        var $row = $(this).closest("tr");    
        var status = $row.find(".status").text();
	if ( status != "ok" ){ 
        	var $text = $row.find(".fp").text();
        	var $href= "/containers/start";
        	var xmlHttpRequest;
        	xmlHttpRequest = createXmlHttpRequest();
        	xmlHttpRequest.onreadystatechange = getResult;
        	var $url = $href + "?id=" + $text;

        	xmlHttpRequest.open("GET",$url,true);
        	xmlHttpRequest.send(null);

        	var html=' \
        	        <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px"> \
        	            <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"> \
        	          <span class="show">正在启动</span> \
        	           </div> \
        	       </div> \
        	     ';
        	$row.find(".status").children().remove();
        	$row.find(".status").append($(html));
        	function getResult(){
        	    if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        	        var $content = xmlHttpRequest.responseText;
        	        if ($content == 'succeed'){
        	            var url='/containers/update?project_id=' + '{{ project_info.id }}' + "&user_id=" + '{{user_id}}';
        	            $.ajax({
        	                type: "GET",
        	                url: url }).done(function( data ) {
        	                        $("#container-table-{{project_info.id}}").html(data);
        	            });
        	        }
        	    }
        	}
	}
    });
$('#container-table-{{project_info.id}}').on("click",".stop-container",function() {
        var $row = $(this).closest("tr");    
        var status = $row.find(".status").text();
	if ( status != "stop" ){ 
        	var $text = $row.find(".fp").text();
        	var $href= "/containers/stop";
        	var xmlHttpRequest;
        	xmlHttpRequest = createXmlHttpRequest();
        	xmlHttpRequest.onreadystatechange = getResult;
        	var $url = $href + "?id=" + $text;

        	xmlHttpRequest.open("GET",$url,true);
        	xmlHttpRequest.send(null);

        	var html=' \
        	        <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px"> \
        	            <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"> \
        	          <span class="show">正在停止</span> \
        	           </div> \
        	       </div> \
        	     ';
        	$row.find(".status").children().remove();
        	$row.find(".status").append($(html));
        	function getResult(){
        	    if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        	        var $content = xmlHttpRequest.responseText;
        	        if ($content == 'succeed'){
        	            var url='/containers/update?project_id=' + '{{ project_info.id }}' + "&user_id=" + '{{user_id}}';
        	            $.ajax({
        	                type: "GET",
        	                url: url }).done(function( data ) {
        	                        $("#container-table-{{project_info.id}}").html(data);
        	            });
        	        }
        	    }
        	}
	}
    });
$('#container-table-{{project_info.id}}').on("click",".reboot-container",function() {
        var $row = $(this).closest("tr");    
        var status = $row.find(".status").text();
        var $text = $row.find(".fp").text();
        var $href= "/containers/reboot";
        var xmlHttpRequest;
        xmlHttpRequest = createXmlHttpRequest();
        xmlHttpRequest.onreadystatechange = getResult;
        var $url = $href + "?id=" + $text;

        xmlHttpRequest.open("GET",$url,true);
        xmlHttpRequest.send(null);

       	var html=' \
       	        <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px"> \
       	            <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"> \
       	          <span class="show">正在停止</span> \
       	           </div> \
       	       </div> \
       	     ';
       	$row.find(".status").children().remove();
       	$row.find(".status").append($(html));
       	function getResult(){
       	    if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
       	        var $content = xmlHttpRequest.responseText;
       	        if ($content == 'succeed'){
       	            var url='/containers/update?project_id=' + '{{ project_info.id }}' + "&user_id=" + '{{user_id}}';
       	            $.ajax({
       	                type: "GET",
       	                url: url }).done(function( data ) {
       	                        $("#container-table-{{project_info.id}}").html(data);
       	            });
       	        }
       	    }
       	}
    });
$('#container-table-{{project_info.id}}').on("click",".commit-container",function() {
        var $row = $(this).closest("tr");    
        var status = $row.find(".status").text();
        var $text = $row.find(".fp").text();
        var $href= "/containers/commit";
        var xmlHttpRequest;
        xmlHttpRequest = createXmlHttpRequest();
        xmlHttpRequest.onreadystatechange = getResult;
        var $url = $href + "?id=" + $text;

        xmlHttpRequest.open("GET",$url,true);
        xmlHttpRequest.send(null);

       	var html=' \
       	        <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px"> \
       	            <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"> \
       	          <span class="show">正在commit</span> \
       	           </div> \
       	       </div> \
       	     ';
       	$row.find(".status").children().remove();
       	$row.find(".status").append($(html));
       	function getResult(){
       	    if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
       	        var $content = xmlHttpRequest.responseText;
       	        if ($content == 'succeed'){
       	            var url='/containers/update?project_id=' + '{{ project_info.id }}' + "&user_id=" + '{{user_id}}';
       	            $.ajax({
       	                type: "GET",
       	                url: url }).done(function( data ) {
       	                        $("#container-table-{{project_info.id}}").html(data);
       	            });
       	        }
       	    }
       	}
    });

$('#container-table-{{project_info.id}}').on("click",".web-access",function() {
        var $row = $(this).closest("tr");    
        var network = $row.find(".network").text();
	net_ary=network.split(/\s+/);
	for (i=0;i<net_ary.length;i++)
	{
	    if(net_ary[i].indexOf("80") > 0)
		{
		    web = net_ary[i].split("~");
		    window.open("http://" + web[0]);
		}
	}
    });

</script>

