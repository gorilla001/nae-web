<table class="table table-striped table-bordered table-hover table-condensed">
	<tbody>
	    {% for item in image_list %}
		{% if role == 'admin' %}
	        <tr>
	            <td class="fp" style="display:none">{{ item.ID }}</td>
	            <td width="15%" class="name">{{ item.ImageName }}</td>
	            <td width="15%" class="tag">{{ item.ImageTag }}</td>
	            <td width="20%">{{ item.ImageDesc }}</td>
	            <td width="28%" style="text-align:right">{{ item.CreatedTime }}</td>
	            {% if item.Status == 'building' %}
	            <td width="7%" style="text-align:right" class="status">
	            <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px">
	                <div class="progress-bar progress-bar-striped active"   role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
	                    <span class="show">正在构建</span>
	                  </div>
	            </div>
	            </td>
	            {% elif item.Status == 'ok' %}
	            <td width="7%" style="text-align:right" class="status">
	                <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px">
	                    <div class="progress-bar progress-bar-success"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
	                        <span class="show">构建成功</span>
	                     </div>
	               </div> 
	            </td>
	            {% elif item.Status == 'deleting' %}
	            <td width="7%" style="text-align:right" class="status">
	            <div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px">
	                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
	                    <span class="show">正在删除</span>
	                  </div>
	            </div>
	            </td>
	            {% else %}
	            <td width="7%" style="text-align:right" class="status">
			<div class="progress" style="width:60px;margin-bottom:0px;margin-top:2px">
	                    <div class="progress-bar progress-bar-danger active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
	                        <span class="show" style="cursor:pointer;">点我试试</span>
	                    </div>
	                </div>
	            </td>
		    <td style="display:none" class="flag">
	                <span style="display:none">{{ item.Status }}</span>
		    </td>
	            {% endif %}
		    <td >
	                 <div class="btn-group btn-group-sm pull-right">
	                    <button class="btn btn-mini btn-primary edit-image">修改
			    </button>
	                    <button class="btn btn-mini btn-danger delete-image">删除
			    </button>
	                    <!--<button class="btn btn-mini btn-danger delete-image-force">强制删除
			    </button>-->
			</div>
		    </td>
	        </tr>
		{% else %}
		<tr>
		    <td class="fp" style="display:none">{{ item.ID }}</td>
	            <td width="25%" class="name">{{ item.ImageName }}</td>
	            <td width="25%" class="tag">{{ item.ImageTag }}</td>
	            <td width="25%">{{ item.ImageDesc }}</td>
	            <td width="25%" style="text-align:right">{{ item.CreatedTime }}</td>
		</tr>
		{% endif %}

	    {% endfor %} 
	</tbody>
</table>
<label id="imgInfoLabel"></lable>
<script>
    $("span").click(function(){
        var row = $(this).closest("tr");
        var id = row.find(".fp").text();
	var status =row.find(".flag").text();
	if ( status == 409 ){ 
	    var url = '/images/conflict?id=' + id;
	    $.ajax({
                  type: "GET",
                  url: url }).done(function( data ) {
                  $("#409Div").html(data);
           });

	    $("#409Modal").modal("show");
	}
    });
</script>
